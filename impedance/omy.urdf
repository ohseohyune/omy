<?xml version="1.0"?>
<robot name="open_manipulator_y" xmlns:xacro="http://wiki.ros.org/xacro">

  <!-- Base link: MJCF의 world + base_unit mesh -->
  <link name="base_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/base_unit.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="base_gray">
        <color rgba="0.2 0.2 0.2 1.0"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/base_unit.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>

  <!-- link1 -->
  <link name="link1">
    <inertial>
      <!-- MJCF inertial pos / quat -> URDF origin xyz/rpy -->
      <origin xyz="-0.000110636 -0.00547113 -0.0158977" rpy="0.339053 -0.009873 0.022733"/>
      <mass value="2.06488"/>
      <inertia ixx="0.00303337" ixy="0.0" ixz="0.0" iyy="0.00279081" iyz="0.0" izz="0.00221937"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/link1.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="lnk_gray"><color rgba="0.2 0.2 0.2 1.0"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/link1.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>

  <joint name="joint1" type="revolute">
    <!-- world→link1: MJCF body pos="0 0 0.1715" -->
    <parent link="base_link"/>
    <child link="link1"/>
    <origin xyz="0 0 0.1715" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-6.28319" upper="6.28319" effort="31.7" velocity="3.76"/>
    <dynamics damping="0.5" friction="0.0"/>
  </joint>

  <!-- link2 -->
  <link name="link2">
    <inertial>
      <origin xyz="0.0000114054 0.0161842 0.103606" rpy="-0.009559 -0.001213 0.001352"/>
      <mass value="3.67954"/>
      <inertia ixx="0.051732" ixy="0.0" ixz="0.0" iyy="0.0503576" iyz="0.0" izz="0.00449718"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/link2.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="lnk_gray2"><color rgba="0.2 0.2 0.2 1.0"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/link2.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>

  <joint name="joint2" type="revolute">
    <!-- link1→link2: body pos="0 -0.1215 0" -->
    <parent link="link1"/>
    <child link="link2"/>
    <origin xyz="0 -0.1215 0" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-6.28319" upper="6.28319" effort="31.7" velocity="3.76"/>
    <dynamics damping="0.5" friction="0.0"/>
  </joint>

  <!-- link3 -->
  <link name="link3">
    <inertial>
      <origin xyz="0.0000781487 0.107185 0.141173" rpy="0.010016 0.000945 -0.001450"/>
      <mass value="2.38659"/>
      <inertia ixx="0.0226944" ixy="0.0" ixz="0.0" iyy="0.021922" iyz="0.0" izz="0.00277422"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/link3.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="lnk_gray3"><color rgba="0.2 0.2 0.2 1.0"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/link3.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>

  <joint name="joint3" type="revolute">
    <!-- link2→link3: body pos="0 0 0.247" -->
    <parent link="link2"/>
    <child link="link3"/>
    <origin xyz="0 0 0.247" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-6.28319" upper="6.28319" effort="31.7" velocity="3.76"/>
    <dynamics damping="0.5" friction="0.0"/>
  </joint>

  <!-- link4 -->
  <link name="link4">
    <inertial>
      <origin xyz="-0.000133183 -0.107467 0.0190907" rpy="0.360171 0.013227 -0.034896"/>
      <mass value="1.40023"/>
      <inertia ixx="0.00175475" ixy="0.0" ixz="0.0" iyy="0.00162284" iyz="0.0" izz="0.00115817"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/link4.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="lnk_gray4"><color rgba="0.2 0.2 0.2 1.0"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/link4.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>

  <joint name="joint4" type="revolute">
    <!-- link3→link4: body pos="0 0.1215 0.2195" -->
    <parent link="link3"/>
    <child link="link4"/>
    <origin xyz="0 0.1215 0.2195" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-6.28319" upper="6.28319" effort="31.7" velocity="3.76"/>
    <dynamics damping="0.5" friction="0.0"/>
  </joint>

  <!-- link5 -->
  <link name="link5">
    <inertial>
      <origin xyz="0.000133183 -0.0190907 0.109967" rpy="1.210163 0.034893 -0.013235"/>
      <mass value="1.40023"/>
      <inertia ixx="0.00175475" ixy="0.0" ixz="0.0" iyy="0.00162284" iyz="0.0" izz="0.00115817"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/link5.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="lnk_gray5"><color rgba="0.2 0.2 0.2 1.0"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/link5.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>

  <joint name="joint5" type="revolute">
    <!-- link4→link5: body pos="0 -0.113 0" -->
    <parent link="link4"/>
    <child link="link5"/>
    <origin xyz="0 -0.113 0" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-6.28319" upper="6.28319" effort="31.7" velocity="3.76"/>
    <dynamics damping="0.5" friction="0.0"/>
  </joint>

  <!-- link6 -->
  <link name="link6">
    <inertial>
      <origin xyz="0.000016005 -0.103085 0.00570277" rpy="2.192635 0.003886 0.001841"/>
      <mass value="0.652774"/>
      <inertia ixx="0.00112656" ixy="0.0" ixz="0.0" iyy="0.000847594" iyz="0.0" izz="0.000551829"/>
    </inertial>

    <!-- main visual -->
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/link6.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="lnk_gray6"><color rgba="0.2 0.2 0.2 1.0"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/link6.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>

    <!-- flange mesh at pos="0 -0.103 0", quat="1 0 0 0" -->
    <visual>
      <origin xyz="0 -0.103 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="assets/flange.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </visual>

    <!-- base mesh at pos="0 -0.109 0", quat="0.500398 0.5 0.5 -0.499602"
         rpy ≈ (1.570796, 1.570796, 0.000398) -->
    <visual>
      <origin xyz="0 -0.109 0" rpy="1.570796 1.570796 0.000398"/>
      <geometry>
        <mesh filename="assets/base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </visual>

    <!-- tcp site (시각용) -->
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <sphere radius="0.005"/>
      </geometry>
      <material name="tcp_red"><color rgba="1 0 0 1"/></material>
    </visual>
  </link>

  <joint name="joint6" type="revolute">
    <!-- link5→link6: body pos="0 0 0.1155" -->
    <parent link="link5"/>
    <child link="link6"/>
    <origin xyz="0 0 0.1155" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-6.28319" upper="6.28319" effort="31.7" velocity="3.76"/>
    <dynamics damping="0.5" friction="0.0"/>
  </joint>

</robot>

